/*

<div class="display">
  <label class="label fi-switch--b2spirit">
    <input type="checkbox" class="toggle_input" />
    <div class="toggle-control"></div>
  </label>
</div>
 */
 :root {
  --b2spirt-color-off       : rgb(132,132,132);
  --b2spirt-color-on        : white;
  --b2spirt-track-color     : rgba(170,170,170,0.3);
  --b2spirt-transition      : all 300ms cubic-bezier(.455, .030, .515, .955);
  --b2spirt-width           : 4em;
  --b2spirt-height          : 2em;
  --b2spirt-circle-size     : 2em;
  --b2spirt-border-height   : .4em;
  --b2spirt-track-height    : .5em;

  /* TODO expose an override in react */
  --b2spirt-background-color: rgb(50,50,50);
}

.fi-switch {
  display : inline-block;
  padding : 3em 1em 1em;
  position: relative;
}

.fi-switch__input {
  display: none;
}

.fi-switch__style {
  /* TODO */
}

.fi-switch__label {
  text-align: center;
  position  : relative;
  top       : -1.5em;
  color     : white;
}

.fi-switch--b2spirit {
  background-color: inherit;
}

.fi-switch__label--b2spirit {
  text-align: center;
  position  : relative;
  top       : -1.5em;
  color     : white;
}

/* The switch checked and unchecked states for the button */
.fi-switch__input--b2spirit {
  /* the stars of the show are the psuedo elements*/
  display: none;
}


@define-mixin stealth-handle {
  position       : absolute;
  top            : calc(-(var(--b2spirt-height) / 2em) + (var(--b2spirt-track-height) / 2em) );
  left           : calc(-var(--b2spirt-circle-size) / 2em);
  display        : block;
  width          : var(--b2spirt-circle-size);
  height         : var(--b2spirt-circle-size);
  content        : '';
  transition     : var(--b2spirt-transition);
  border-radius  : 50%;
  background-clip: padding-box;
}


  .fi-switch__style--b2spirit,
  .fi-switch__extra--b2spirit {
    position        : relative;
    display         : block;
    margin          : 0 auto;
    left            : 25%;
        top: -0.5em;
    background-color: inherit;
  }

/* sets up the track and the pseudo elements (circles)*/
.fi-switch__style--b2spirit:before {
  position        : absolute;
  display         : block;
  margin          : 0 auto;
  content: ' ';
  /* track size and length*/
  width           : var(--b2spirt-width);
  height          : var(--b2spirt-track-height);
  /* give it a subtle look*/
  color           : var(--b2spirt-track-color);
  border-radius   : var(--b2spirt-height);
  background-color: var(--b2spirt-track-color);
}


/* The larger outer circle for the handle. Starts hollow and becomes filled when checked*/
.fi-switch__style--b2spirit:after {
  @mixin stealth-handle;
  background-color: inherit;
  transform: scale(1.1);

}


/* The middle circle which changes color*/
.fi-switch__extra--b2spirit:before {
  @mixin stealth-handle;
  /* give it a border to keep centered with the :before circle*/
    background-color: var(--b2spirt-color-off);
  /*content         : '✔';
  color           : #000;
  line-height     : calc(var(--b2spirt-circle-size));
  font-weight     : bolder;*/
}


/* The smaller circle which gives the handle a hollow effect when unchecked*/
.fi-switch__extra--b2spirit:after {
  @mixin stealth-handle;
  transform       : scale(.8);
  /* give it a border to keep centered with the :before circle*/
  background-color: inherit;
  /*content         : '✔';
  color           : #000;
  line-height     : calc(var(--b2spirt-circle-size));
  font-weight     : bolder;*/
}


/* Move the background circle */
.fi-switch__input--b2spirit:checked + .fi-switch__style--b2spirit:after  {
    left      : calc((var(--b2spirt-width) / 2em) + (var(--b2spirt-circle-size) / 2em));

  }

/* Move and change the background for the main handle circle */
.fi-switch__input--b2spirit:checked + .fi-switch__style--b2spirit + .fi-switch__extra--b2spirit:before {
    left      : calc((var(--b2spirt-width) / 2em) + (var(--b2spirt-circle-size) / 2em));
    background: var(--b2spirt-color-on);
  }

/* shrink the hollow middle*/
.fi-switch__input--b2spirit:checked + .fi-switch__style--b2spirit + .fi-switch__extra--b2spirit:after {
  left     : calc((var(--b2spirt-width) / 2em) + (var(--b2spirt-circle-size) / 2em));
  /* shrink to nothing!*/
  transform: scale(0);
}



/*

Expand toggle effect

 */
 :root {
  --expand-track-width        : 3.5em;
  --expand-track-height       : 1.3em;
  --expand-track-color        : rgb(196,196,196);
  --expand-track-color-on     : rgb(40,166,38);
  --expand-handle-height      : 1em;
  --expand-handle-width       : 1.5em;
  --expand-handle-color-off   : rgb(196,196,196);
  --expand-handle-color-on    : rgb(255,255,255);
  --expand-handle-clear-border: .2em;
  --expand-handle-start-offset: .3em;
  --expand-transition-handle  : all 500ms cubic-bezier(0.165, 0.840, 0.440, 1.000);
  --expand-transition-track   : all 300ms cubic-bezier(0.215, 0.610, 0.355, 1.000);
}

.fi-switch--expand {
  background-color: inherit;
}

.fi-switch__label--expand {
  /* Nothing */
}

/**/
.fi-switch__input--expand {
  display: none;
}

/*Set up the general position and location of the toggle relative to the label */
.fi-switch__style--expand,
.fi-switch__extra--expand {
  position        : relative;
  display         : block;
  margin          : 0 auto;
  top             : -1em;
  left            : 25%;
  background-color: inherit;
}

/* Create our track*/
.fi-switch__style--expand:before {
  position        : absolute;
  content         : ' ';
  display         : block;
  margin          : 0 auto;
  width           : var(--expand-track-width);
  height          : var(--expand-track-height);
  transform       : scaleY(0.1);
  transform-origin: 50% 50%;
  color           : var(--expand-handle-color-on);
  border-radius   : 2px;
  background-color: var(--expand-track-color);
  transition      : var(--expand-transition-track);
}

.fi-switch__style--expand:after {
  width           : calc(var(--expand-handle-width) + 0.2em);
  height          : calc(var(--expand-handle-height) + 0.2em);
  border-radius   : .5em;
  position        : absolute;
  top             : calc(var(--expand-track-height) / 2em - var(--expand-handle-height) / 2em - var(--expand-handle-clear-border) / 2em );
  left            : calc( var(--expand-handle-start-offset) - var(--expand-handle-clear-border) / 2em );
  content         : ' ';
  display         : block;
  background-color: inherit;
  transition      : var(--expand-transition-handle);
}



/* the subtle clear border around the handle */
.fi-switch__style--expand {
  background-color: inherit;
}


.fi-switch__input--expand:checked + .fi-switch__style--expand:before {
  transform       : scaleY(1);
  border-radius   : var(--expand-track-height);
  background-color: var(--expand-track-color-on);
}

.fi-switch__input--expand:checked + .fi-switch__style--expand:after {
    opacity: 0;
  left   : calc(var(--expand-track-width) - 0.3em - var(--expand-handle-width));
  width  : calc(var(--expand-handle-width) );
  height : calc(var(--expand-handle-height) );
}


/*Create the handle which moves across the track */
.fi-switch__extra--expand:before {
  width           : var(--expand-handle-width);
  height          : var(--expand-handle-height);
  border-radius   : .5em;
  position        : absolute;
  top             : calc(var(--expand-track-height) / 2em - var(--expand-handle-height) / 2em);
  left            : var(--expand-handle-start-offset);
  content         : ' ';
  display         : block;
  background-color: var(--expand-handle-color-off);
  transition      : var(--expand-transition-handle);
}

/* movve our handle across and change the color to signify its enabled */
.fi-switch__input--expand:checked + .fi-switch__style--expand + .fi-switch__extra--expand:before {
  left            : calc(var(--expand-track-width) - var(--expand-handle-start-offset) - var(--expand-handle-width));
  background-color: var(--expand-handle-color-on);
}

/* our check mark */
.fi-switch__extra--expand:after {
  position        : absolute;
  line-height     : normal;
  left            : .5em;
  font-size       : .8em;
  content         : '✔';
  display         : block;
  margin          : 0 auto;
  color           : var(--expand-handle-color-on);
  background-color: none;
  opacity         : 0;
  transition      : var(--expand-transition-track);
}

/* Now show the check mark */
.fi-switch__input--expand:checked + .fi-switch__style--expand + .fi-switch__extra--expand:after {
  opacity: 1;
}
